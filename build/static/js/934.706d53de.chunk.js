"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[934],{3131:function(t,e,n){n.d(e,{Z:function(){return u}});var r=n(3504),a="MovieList_list__0fwot",c="MovieList_listItem__TvXoB",o="MovieList_title__4inTF",i=n(184),u=function(t){var e=t.movies,n=t.location;return(0,i.jsx)("ul",{className:a,children:e.map((function(t){var e=t.id,a=t.original_title,u=t.poster_path,s=t.name;return(0,i.jsx)("li",{className:c,children:(0,i.jsx)(r.rU,{to:{pathname:"/movies/".concat(e),state:{from:n}},children:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{children:(0,i.jsx)("img",{src:"https://image.tmdb.org/t/p/w500".concat(u),alt:a,title:a,width:"360",height:"450"})}),(0,i.jsxs)("h2",{className:o,children:[a,s]})]})})},e)}))})}},3961:function(t,e,n){n.d(e,{vw:function(){return h},Mc:function(){return m},FE:function(){return v},y:function(){return d},Bt:function(){return _}});var r=n(5861),a=n(7757),c=n.n(a),o=n(4569),i=n.n(o),u="ec54c0409f7f71b36a33826187600e03",s="https://api.themoviedb.org/3";function l(){return f.apply(this,arguments)}function f(){return f=(0,r.Z)(c().mark((function t(){var e,n,r,a=arguments;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:"",n=a.length>1&&void 0!==a[1]?a[1]:{},t.next=4,fetch(e,n);case 4:if(!(r=t.sent).ok){t.next=11;break}return t.next=8,r.json();case 8:t.t0=t.sent,t.next=12;break;case 11:t.t0=Promise.reject(new Error("Not found"));case 12:return t.abrupt("return",t.t0);case 13:case"end":return t.stop()}}),t)}))),f.apply(this,arguments)}function h(){return l("".concat(s,"/trending/all/day?api_key=").concat(u))}function m(t){return p.apply(this,arguments)}function p(){return(p=(0,r.Z)(c().mark((function t(e){var n,r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i().get("".concat(s,"/movie/").concat(e,"?api_key=").concat(u,"&language=en-US"));case 3:return n=t.sent,r=n.data,t.abrupt("return",r);case 8:t.prev=8,t.t0=t.catch(0),console.log("===ERROR===",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}function v(t,e){return l("".concat(s,"/search/movie?api_key=").concat(u,"&query=").concat(t,"&page=").concat(e,"&language=en-US"))}function d(t){return l("".concat(s,"/movie/").concat(t,"/credits?api_key=").concat(u))}function _(t){return l("".concat(s,"/movie/").concat(t,"/reviews?api_key=").concat(u,"&page=1"))}},8934:function(t,e,n){n.r(e),n.d(e,{default:function(){return w}});var r=n(8683),a=n(2982),c=n(5861),o=n(885),i=n(7757),u=n.n(i),s=n(2791),l=n(6871),f=n(5880),h=n(9983),m=n(184);function p(){return(0,m.jsx)("h1",{children:"404 \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430..."})}var v={searchbar:"Search_searchbar__UdhWs",form:"Search_form__OWDwB",button:"Search_button__7MQig",buttonlabel:"Search_buttonlabel__hmTMi",input:"Search_input__899ew"},d=function(t){var e=t.onSubmit,n=(0,s.useState)(""),r=(0,o.Z)(n,2),a=r[0],c=r[1];return(0,m.jsx)("header",{className:v.searchbar,children:(0,m.jsxs)("form",{onSubmit:function(t){t.preventDefault(),""!==a.trim()?(e(a),c("")):p()},className:v.form,children:[(0,m.jsx)("button",{type:"submit",className:v.button,children:(0,m.jsx)(h.Pd.Provider,{value:{color:"ffffff",size:"2em"},children:(0,m.jsx)("div",{className:v.buttonLabel,children:(0,m.jsx)(f.lnn,{})})})}),(0,m.jsx)("input",{className:v.input,type:"text",autoFocus:!0,placeholder:"Search films",name:"searchQuery",value:a,onChange:function(t){c(t.currentTarget.value.toLowerCase())}})]})})},_=n(3961),x=n(3131),g="Button_button__B3u-F",b=function(t){var e=t.onClick;return(0,m.jsx)("button",{onClick:e,className:g,children:"load more"})},j=n(5154),w=function(){var t=(0,l.s0)(),e=(0,l.TH)(),n=new URLSearchParams(e.search).get("query"),i=(0,s.useState)(n||""),f=(0,o.Z)(i,2),h=f[0],v=f[1],g=(0,s.useState)("1"),w=(0,o.Z)(g,2),k=w[0],y=w[1],S=(0,s.useState)([]),Z=(0,o.Z)(S,2),N=Z[0],C=Z[1],F=(0,s.useState)(null),E=(0,o.Z)(F,2),L=E[0],M=E[1],T=(0,s.useState)(!1),B=(0,o.Z)(T,2),U=B[0],P=B[1];(0,s.useEffect)((function(){if(h){var t=function(){var t=(0,c.Z)(u().mark((function t(){var e,n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return P(!0),t.prev=1,t.next=4,_.FE(h,k);case 4:e=t.sent,0===(n=e.results).length&&alert("Nothing found"),C((function(t){return[].concat((0,a.Z)(t),(0,a.Z)(n))})),P(!0),1!==k&&R(),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),M(t.t0);case 15:return t.prev=15,P(!1),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[1,12,15,18]])})));return function(){return t.apply(this,arguments)}}();t()}}),[k,h]);var R=function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(d,{onSubmit:function(n){C([]),v(n),y(1),M(null),t((0,r.Z)((0,r.Z)({},e),{},{search:"query=".concat(n)}))}}),N&&N.length>0&&(0,m.jsx)(x.Z,{movies:N,location:e}),!1===U&&N.length>=12&&(0,m.jsx)(b,{onClick:function(){y((function(t){return t+1}))}}),U&&(0,m.jsx)(j.Z,{}),L&&(0,m.jsx)(p,{message:L.message})]})}}}]);
//# sourceMappingURL=934.706d53de.chunk.js.map